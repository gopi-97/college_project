<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css?family=Outfit&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet" />
    {% load static %}

    <link href="{% static 'dashboard/css/dashboard.css' %}" rel="stylesheet">
    <link href="{% static 'dashboard/css/inventory_list.css' %}" rel="stylesheet">

    {% block style %} {% endblock %}
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <title>home</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var xhr = new XMLHttpRequest();
            var url = "{% url 'tasks' %}";
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // On success, update the to-do list content
                    document.querySelector(".to-do-list").innerHTML = xhr.responseText;
                }
            };
            xhr.open('GET', url);
            xhr.send();
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var xhr = new XMLHttpRequest();
            var url = "{% url 'inventory-list' %}";
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // On success, update the to-do list content
                    document.querySelector(".inventory-list").innerHTML = xhr.responseText;
                }
            };
            xhr.open('GET', url);
            xhr.send();
        });
    </script>

</head>

<body>
    
    
    <div class="dashboard">
        {% include 'dashboard/partials/header.html' %}
        <div class="farm-stats">
            {% include 'dashboard/partials/add_product.html' %}

            <div class="field-size">
                {% include 'dashboard/partials/field.html' %}
            </div>
        </div>
    </div>
    <div class="Inventory-graph">
        {% include 'dashboard/partials/graph.html' %}
    </div>

    <div class='inventory-list'>
    </div>

    <div class='to-do-list'>
        {% include 'todo/tasks_list.html'  %}
    </div>
    
    <script>
       
        function logout(){
            window.location.href="{% url 'logout' %}";
        }
        const 
        section1 = document.querySelector(".section1"),
        section2 = document.querySelector(".section2"),

        overlay = document.querySelector(".overlay"),

        showBtn = document.querySelector(".show-modal"),
        showBtn2 = document.querySelector(".add-field"),

        closeBtn = document.querySelector(".close-btn");
        closeBtn2 = document.querySelector(".close-btn-2");

        showBtn.addEventListener("click", () => section1.classList.add("active"));
        showBtn2.addEventListener("click", () => section2.classList.add("active"));

        overlay.addEventListener("click", () =>
            section.classList.remove("active")
        );

        closeBtn.addEventListener("click", () =>
            section1.classList.remove("active")
        );

        closeBtn2.addEventListener("click", () =>
            section2.classList.remove("active")
        );

        
    </script>
   
</body>
</html>